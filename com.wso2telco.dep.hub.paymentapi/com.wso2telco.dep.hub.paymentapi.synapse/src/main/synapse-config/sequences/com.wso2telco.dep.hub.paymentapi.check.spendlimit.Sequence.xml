<?xml version="1.0" encoding="UTF-8"?>
<sequence
    name="com.wso2telco.dep.hub.paymentapi.check.spendlimit.Sequence"
    onError="com.wso2telco.dep.hub.paymentapi.check.spendlimit.error.Sequence" xmlns="http://ws.apache.org/ns/synapse">

    <property expression="get-property('CONSUMER_KEY')"
        name="consumerKey" scope="default" type="STRING" xmlns:ns="http://org.apache.synapse/xsd"/>
        
    <property expression="get-property('endUserId')" name="endUserId"
        scope="default" type="STRING" xmlns:ns="http://org.apache.synapse/xsd"/>
        
    <class name="com.wso2telco.dep.common.mediation.spendlimit.mediator.CheckLimitMediator"/>

    <filter regex="true" source="get-property('INTERNAL_ERROR')">
        <then>
            <sequence key="com.wso2telco.dep.common.response.exceptions.Sequence"/>
        </then>
        <else/>
    </filter>

</sequence>
                                                                                                                                                                                                                                          